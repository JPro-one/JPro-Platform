plugins {
    id 'org.bytedeco.gradle-javacpp-platform' version "$JAVACPP_VERSION"
}

apply plugin: 'org.openjfx.javafxplugin'
apply plugin: 'jpro-gradle-plugin'

dependencies {
    implementation project(":jpro-sound")
    implementation project(":jpro-sessions")
    implementation project(":htmlscrollpane")
    implementation project(":jpro-media")
    implementation "com.sandec.jpro:jpro-webapi:$JPRO_VERSION"

    implementation "org.bytedeco:javacv-platform:$JAVACV_VERSION"
//    compileOnly "org.bytedeco:javacv-platform:$JAVACV_VERSION" // when running on JPro
    implementation "io.github.mkpaz:atlantafx-base:1.2.0"
    runtimeOnly "ch.qos.logback:logback-classic:1.4.5"

    implementation "com.sandec.jpro:jpro-routing-core:$JPRO_ROUTING_VERSION"
    implementation "com.sandec.jpro:jpro-routing-dev:$JPRO_ROUTING_VERSION"
}

mainClassName = 'one.jpro.utils.example.Main'

//mainClassName = 'one.jpro.utils.example.JProSoundSample'
//mainClassName = 'one.jpro.utils.example.SessionManagerSample'
//mainClassName = 'one.jpro.utils.example.HTMLScrollPaneSample'

//mainClassName = 'one.jpro.example.media.MediaPlayerSample'
//mainClassName = 'one.jpro.example.media.MediaRecorderSample'
//mainClassName = 'one.jpro.example.media.MediaRecorderAndPlayerSample'
//mainClassName = 'one.jpro.example.media.MediaPlayerApplication'
//mainClassName = 'one.jpro.example.media.MediaRecorderApplication'

javafx {
    version = "$JAVAFX_VERSION"
    modules = ['javafx.base', 'javafx.graphics', 'javafx.controls',
               'javafx.fxml', 'javafx.media', 'javafx.swing', 'javafx.web']
}

run {
    doFirst {
        jvmArgs = [
                '--add-exports', 'javafx.base/com.sun.javafx.event=one.jpro.media'
        ]
    }
}

application {
  mainClass = "$mainClassName"
  mainModule = moduleName
  applicationDefaultJvmArgs = [
          "--add-exports", "javafx.base/com.sun.javafx.event=one.jpro.media"
  ]
}
